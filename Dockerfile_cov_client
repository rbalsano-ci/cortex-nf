FROM python:3.11.9

LABEL authors="Rick Balsano <rick@cortexintel.com>"

RUN pip install pipenv

COPY . cortex-nf

WORKDIR cortex-nf

RUN pipenv install

ARG TARGET_DEVICE_ID
ARG BACPYPES_DEBUG
ARG SUBSCRIBE_CONFIRMED
ARG SUBSCRIBE_PROPERTY_REQUEST
ARG SUBSCRIPTION_LIFETIME
ARG SUBNET_BITS

ENV TARGET_DEVICE_ID=${TARGET_DEVICE_ID:-10}
ENV BACPYPES_DEBUG=${BACPYPES_DEBUG}
ENV SUBSCRIBE_CONFIRMED=${BACPYPES_DEBUG:-false}
ENV SUBSCRIBE_PROPERTY_REQUEST=${SUBSCRIBE_PROPERTY_REQUEST:-false}
ENV SUBSCRIPTION_LIFETIME=${SUBSCRIPTION_LIFETIME:-60}
ENV SUBNET_BITS=${SUBNET_BITS:-20}

CMD pipenv run python cov_client.py
